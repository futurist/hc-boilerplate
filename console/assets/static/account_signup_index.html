<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>index.jsx-document</title>
  <link rel="stylesheet" type="text/css" href="docco.css">
  <style>
    .code .highlight{
      position: relative;
      display: inline-block;
      width: 100%;
    }
    .code .highlight pre{
      width: 98%;
    }
    .code .highlight .link{
      position: absolute;
      top: 6px;
      left: -6px;
      text-decoration: none;
      padding: 2px 4px;
      border: 1px solid #0088cc;
      background: #6666ff;
      color: white;
      line-height: 5px;
      border-radius: 1px;
    }
    .code .highlight .link.open{
      padding: 4px 4px 2px;
    }
    .code .highlight .link:hover{
      background: #0088cc
    }
    .code .highlight .close:after{
      font-family: "fleurons";
      content: "-";
    }
    .code .highlight .open:after{
      font-family: "fleurons";
      content: "+";
    }
    .code .highlight pre.narrow{
      overflow: hidden;
      height: 34px;
    }
    pre.narrow:before{
      position: absolute;
      margin-top: -4px;
      color: #f50;
      content: '...';
    }
    #J_iframe{
      width: 1000px;
      height: 80%;
      max-height: 600px;
      position: absolute;
      background: white;
      top: 70px;
      left: 240px;
      visibility: hidden;
      border: 1px solid gray;
      z-index: 100000;
    }
    
  </style>
</head>
<body>
<div id='container'>
  <div id="background"></div>
  
  <div id="jump_to">
    Jump To &hellip;
    <div id="jump_wrapper">
      <div id="jump_page">
        
          
          <a class="source" href="account_login_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/account/login/index.jsx
          </a>
        
          
          <a class="source" href="account_signup_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/account/signup/index.jsx
          </a>
        
          
          <a class="source" href="content_baseList_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/content/baseList/index.jsx
          </a>
        
          
          <a class="source" href="dashboard_analysis_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/dashboard/analysis/index.jsx
          </a>
        
          
          <a class="source" href="detail_baseForm_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/detail/baseForm/index.jsx
          </a>
        
          
          <a class="source" href="feedback_exception_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/feedback/exception/index.jsx
          </a>
        
          
          <a class="source" href="feedback_flowResult_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/feedback/flowResult/index.jsx
          </a>
        
          
          <a class="source" href="feedback_result_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/feedback/result/index.jsx
          </a>
        
          
          <a class="source" href="feedback_trackResult_index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/feedback/trackResult/index.jsx
          </a>
        
          
          <a class="source" href="index.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/index.jsx
          </a>
        
          
          <a class="source" href="viewSource.html">
            /Users/zhushengjia/Desktop/drive/projects/f2e/naza/hc-boilerplate-console/assets/scenes/viewSource.jsx
          </a>
        
      </div>
    </div>
  </div>
  
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class="docs" colspan="2"><h1>index.jsx <a href="javascript:;" id="J_demo">demo</a>
        <iframe id="J_iframe" src="" frameborder="0" scrolling="auto" ></iframe></h1>
      </th>
    </tr>
  </thead>
  <tbody>
    
    
    <tr id='section-1'>
      
      <td class="docs header-docs" colspan="2">
        <div class="pilwrap ">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        
      </td>
      
      <td class="code">
        <div class='highlight'><pre><div class='highlight'><pre><span class="hljs-keyword">import</span> React, {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> PropTypes <span class="hljs-keyword">from</span> <span class="hljs-string">'prop-types'</span>;

<span class="hljs-keyword">import</span> Alert <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/alert'</span>;
<span class="hljs-keyword">import</span> Tabs <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/tabs'</span>;
<span class="hljs-keyword">import</span> Input <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/input'</span>;
<span class="hljs-keyword">import</span> Button <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/button'</span>;
<span class="hljs-keyword">import</span> Popover <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/popover'</span>;
<span class="hljs-keyword">import</span> Progress <span class="hljs-keyword">from</span> <span class="hljs-string">'antd/lib/progress'</span>;
<span class="hljs-keyword">import</span> Beatle <span class="hljs-keyword">from</span> <span class="hljs-string">'beatle'</span>;

<span class="hljs-keyword">import</span> {CustomForm} <span class="hljs-keyword">from</span> <span class="hljs-string">'hc-components'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.less'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginScene</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">static</span> routeOptions = {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'注册'</span>,
    <span class="hljs-attr">layout</span>: <span class="hljs-string">'landingLayout'</span>
  }

  <span class="hljs-keyword">static</span> propTypes = {
    <span class="hljs-attr">form</span>: PropTypes.object
  }

  statusMap = {
    <span class="hljs-attr">ok</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"status-success"</span>&gt;</span>强度：强<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
    ),
    <span class="hljs-attr">pass</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"status-warning"</span>&gt;</span>强度：中<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
    ),
    <span class="hljs-attr">pool</span>: (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"status-error"</span>&gt;</span>强度：太短<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
    )
  };

  progressMap = {
    <span class="hljs-attr">ok</span>: <span class="hljs-string">'success'</span>,
    <span class="hljs-attr">pass</span>: <span class="hljs-string">'normal'</span>,
    <span class="hljs-attr">pool</span>: <span class="hljs-string">'exception'</span>
  };

  tabKeys = [<span class="hljs-string">'account'</span>];

  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);

    <span class="hljs-keyword">this</span>.state = {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">errorMessage</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">activeKey</span>: <span class="hljs-string">'account'</span>,
      <span class="hljs-attr">confirmDirty</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">help</span>: <span class="hljs-string">''</span>
    };
  }

  handleSbumit() {}

  handleCaptcha() {
    <span class="hljs-keyword">let</span> count = <span class="hljs-number">59</span>;
    <span class="hljs-keyword">this</span>.setState({count});
    <span class="hljs-keyword">this</span>.$interval_ = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      count -= <span class="hljs-number">1</span>;
      <span class="hljs-keyword">this</span>.setState({count});
      <span class="hljs-keyword">if</span> (count === <span class="hljs-number">0</span>) {
        clearInterval(<span class="hljs-keyword">this</span>.$interval_);
      }
    }, <span class="hljs-number">1000</span>);
  }

  renderStatusProgress(form) {
    <span class="hljs-keyword">let</span> status = <span class="hljs-string">'pool'</span>;
    <span class="hljs-keyword">const</span> value = form.getFieldValue(<span class="hljs-string">'password'</span>);
    <span class="hljs-keyword">if</span> (value &amp;&amp; value.length &gt; <span class="hljs-number">9</span>) {
      status = <span class="hljs-string">'ok'</span>;
    }
    <span class="hljs-keyword">if</span> (value &amp;&amp; value.length &gt; <span class="hljs-number">5</span>) {
      status = <span class="hljs-string">'pass'</span>;
    }
    <span class="hljs-keyword">return</span> (
      &lt;div style={{
        padding: '4px 0'
      }}&gt;
        {this.statusMap[status]}
        {value &amp;&amp; value.length ?
          (
            &lt;div className={'progress-' + status}&gt;
              &lt;Progress
                status={this.progressMap[status]}
                className="progress"
                strokeWidth={6}
                percent={(value.length * 10 &gt; 100 ? 100 : value.length * 10)}
                showInfo={false}
              /&gt;
            &lt;/div&gt;
          ) : null}
        &lt;p style={{
          marginTop: 10
        }}&gt;请至少输入 6 个字符。请不要使用容易被猜到的密码。&lt;/p&gt;
      &lt;/div&gt;
    );
  }

  checkPassword(form, rule, value, callback) {
    if (!value) {
      this.setState({
        help: '请输入密码！',
        visible: !!value
      });
      callback('error');
    } else {
      this.setState({help: ''});
      if (!this.state.visible) {
        this.setState({
          visible: !!value
        });
      }
      if (value.length &lt; 6) {
        callback('error');
      } else {
        const form = this.props.form;
        if (value &amp;&amp; this.state.confirmDirty) {
          form.validateFields(['confirm'], {force: true});
        }
        callback();
      }
    }
  }

  handleConfirmBlur = (e) =&gt; {
    const {value} = e.target;
    this.setState({
      confirmDirty: this.state.confirmDirty || !!value
    });
  }

  checkConfirm = (form, rule, value, callback) =&gt; {
    if (value &amp;&amp; value !== form.getFieldValue('password')) {
      callback('两次输入的密码不匹配!');
    } else {
      callback();
    }
  }

  render() {
    return (
      &lt;div className="j-scene j-scene-signup"&gt;
        &lt;Tabs
          animated={false}
          activeKey={this.state.activeKey}
          onChange={key =&gt; this.setState({activeKey: key})}&gt;
          &lt;Tabs.TabPane tab="账号注册" key={this.tabKeys[0]}&gt;
            {this.state.errorMessage &amp;&amp; this.state.activeKey === this.tabKeys[0] ?
              (&lt;Alert
                style={{
                  marginBottom: 24
                }}
                message={this.state.errorMessage}
                type="error"
                showIcon
              /&gt;) : null}
            &lt;CustomForm
              onSubmit={this.handleSbumit.bind(this)}
              formLayout={{
                labelCol: {
                  span: 0
                },
                wrapperCol: {
                  span: 24
                }
              }}
              options={[
                {
                  type: 'string',
                  name: 'mail',
                  title: '账号',
                  placeholder: '邮箱',
                  rules: [
                    {
                      required: true,
                      message: '请输入邮箱地址！'
                    }, {
                      type: 'email',
                      message: '邮箱地址格式错误！'
                    }
                  ],
                  getProps: () =&gt; {
                    return {size: 'large'};
                  }
                }, {
                  type: 'string',
                  name: 'password',
                  title: '密码',
                  placeholder: '至少6位密码，区分大小写',
                  help: this.state.help,
                  render: (key, formItemWrapper, inputPops, form) =&gt; {
                    return (
                      &lt;Popover
                        key={key}
                        content={this.renderStatusProgress(form)}
                        overlayStyle={{
                          width: 240
                        }}
                        placement="right"
                        visible={this.state.visible}&gt;
                        {formItemWrapper((&lt;Input {...inputPops} size="large" type="password" /&gt;), {
                          rules: [
                            {
                              required: true,
                              message: '请输入密码！'
                            }, {
                              validator: this
                                .checkPassword
                                .bind(this, form)
                            }
                          ]
                        })}
                      &lt;/Popover&gt;
                    );
                  }
                }, {
                  type: 'string',
                  name: 'confirm',
                  title: '确认密码',
                  placeholder: '确认密码',
                  render: (key, formItemWrapper, inputPops, form) =&gt; {
                    return formItemWrapper((&lt;Input {...inputPops} size="large" type="password" /&gt;), {
                      rules: [
                        {
                          required: true,
                          message: '请确认密码！'
                        }, {
                          validator: this
                            .checkConfirm
                            .bind(this, form)
                        }
                      ]
                    });
                  }
                }, {
                  type: 'string',
                  name: 'captcha',
                  title: '验证码',
                  placeholder: '验证码',
                  className: 'elem-captcha',
                  getProps: () =&gt; {
                    return {size: 'large', suffix: (
                      &lt;Button
                        disabled={this.state.count &gt; 0}
                        className="elem-captcha-btn"
                        size="large"
                        onClick={this
                          .handleCaptcha
                          .bind(this)}&gt;
                        {this.state.count ? `${this.state.count} s` : '获取验证码'}
                      &lt;/Button&gt;
                    )};
                  }
                }
              ]}
              buttons={(
                &lt;Button htmlType="submit" size="large" type="primary"&gt;注册&lt;/Button&gt;
              )}
            /&gt;
            &lt;Beatle.Link className="elem-login" to="account/login"&gt;使用已有账户登录&lt;/Beatle.Link&gt;
          &lt;/Tabs.TabPane&gt;
        &lt;/Tabs&gt;
      &lt;/div&gt;
    );
  }
}</pre></div></pre><a href="javascript:;" class="link close"></a></div>
      </td>
      
    </tr>
    
  </table>
</div>
</body>
<script>
  (function(win){
    
    var addEvent = (function() {
      if (document.addEventListener) {
        return function(el, type, fn) {
          if (el.length) {
            for (var i = 0, len = el.length; i < len; i++) {
              addEvent(el[i], type, fn);
            }
          } else {
            el.addEventListener(type, fn, false);
          }
        };
      } else {
        return function(el, type, fn) {
          if (el.length) {
            for (var i = 0, len = el.length; i < len; i++) {
              addEvent(el[i], type, fn);
            }
          } else {
            el.attachEvent('on' + type, function() {
              return fn.call(el, window.event);
            });
          }
        };
      }
    })();
    
    if(document.getElementsByClassName){
      var links = document.getElementsByClassName('link');
      for(var i = links.length; i--;){
        (function(link){
          addEvent(link, 'click', function(ev){
            var pre = link.previousSibling;
            if(link.className.indexOf('open') > -1){
              link.className = link.className.replace('open', '') + ' close';
              pre.className = '';
            }else{
              link.className = link.className.replace('close', '') + ' open';
              pre.className = 'narrow';
            }
          });
        })(links[i]);
      }
    }
    
    var demo = document.getElementById('J_demo');
    var iframe = document.getElementById('J_iframe');
    addEvent(demo, 'click', function(ev){
      if(iframe.style.visibility === 'visible'){
        iframe.style.visibility = 'hidden'
      }else{
        iframe.style.visibility = 'visible'
      }
    });
  })(window);
</script>
</html>
